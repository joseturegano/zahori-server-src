<banner [banner]="banner" (click)="closeBanner()"></banner>
<div class="sidebarZahoricontent">

    <div class="app-page-title">
        <div class="page-title-wrapper">
            <div class="page-title-heading">
                <div>{{'main.admin.tms.title'|translate}}</div>
            </div>
        </div>
    </div>

    <div class="col-12" *ngIf="clientTestRepos.length == 0">
      {{'main.admin.tms.noRepo'|translate}}
    </div>

    <div *ngIf="clientTestRepos.length > 0">

        <div class="row ml-1">
            <div class="col-2">
                <h6>{{'main.admin.tms.active'|translate}}</h6>
            </div>
            <div class="col-2">
                <h6>{{'main.admin.tms.name'|translate}}</h6>
            </div>
            <!--<div class="col-1">
            <h6>Orden</h6>
        </div>-->
            <div class="col-4">
                <h6>{{'main.admin.tms.url'|translate}}</h6>
            </div>
            <div class="col-2">
                <h6>{{'main.admin.tms.user'|translate}}</h6>
            </div>
            <div class="col-2">
                <h6>{{'main.admin.tms.key'|translate}}</h6>
            </div>
            <div class="col-1">
                <h6></h6>
            </div>
        </div>

        <div *ngFor="let clientTestRepo of clientTestRepos; let i = index" class="row ml-1  mb-2">

            <div class="col-1 d-flex custom-control custom-switch">
                <input [(ngModel)]="clientTestRepo.active" type="checkbox"
                    id="active-{{clientTestRepo.id.testRepoId}}" (change)="activateSwitch(clientTestRepo, $event)"
                    class="custom-control-input">
                <label for="active-{{clientTestRepo.id.testRepoId}}" class="custom-control-label"></label>
            </div>
            <div class="col-2 d-flex">
                <select name="reponame" id="{{'reponame-' + clientTestRepo.id.testRepoId}}" class="form-control"
                    [disabled]="!clientTestRepo.active"
                    [(ngModel)]="testRepos.get(clientTestRepo.id.testRepoId).name">
                    <option [selected]="testRepos.get(clientTestRepo.id.testRepoId).name == 'Jira Xray'">Jira Xray</option>
                    <option [selected]="testRepos.get(clientTestRepo.id.testRepoId).name == 'Azure Test Plans'">Azure Test Plans</option>
                    <option [selected]="testRepos.get(clientTestRepo.id.testRepoId).name == 'TestLink'">TestLink</option>
                    <option [selected]="testRepos.get(clientTestRepo.id.testRepoId).name == 'Hp Alm'">Hp Alm</option>
                </select>
            </div>
            <!--<div class="col-1 d-flex">
                <input name="order" id="{{'order-'+clientTestRepo.id.testRepoId}}" placeholder="{{testRepos.get(clientTestRepo.id.testRepoId).order}}" [disabled]="!testRepos.get(clientTestRepo.id.testRepoId).active" [(ngModel)]="testRepos.get(clientTestRepo.id.testRepoId).order" type="number"min="1" max="99" class="form-control">
            </div>-->
            <div class="col-4 d-flex">
                <input name="url" id="{{'url-'+clientTestRepo.id.testRepoId}}" placeholder="{{clientTestRepo.url}}"
                    [disabled]="!clientTestRepo.active" [(ngModel)]="clientTestRepo.url" type="text"
                    class="form-control">
            </div>
            <div class="col-2 d-flex">
                <input name="user" id="{{'user-'+clientTestRepo.id.testRepoId}}" placeholder="{{clientTestRepo.user}}"
                    [disabled]="!clientTestRepo.active" [(ngModel)]="clientTestRepo.user" type="text"
                    class="form-control">
            </div>
            <div class="col-2 d-flex">
                <input name="password" id="{{'password-'+clientTestRepo.id.testRepoId}}"
                    [disabled]="!clientTestRepo.active" [(ngModel)]="clientTestRepo.password"
                    type="password" class="form-control">
            </div>
            <div class="col-1 d-flex p-2 mt-1">
                <a (click)="save(clientTestRepo.id.testRepoId, i)" title="{{'main.admin.tms.save'|translate}}"
                    [hidden]="!clientTestRepo.active">
                    <i class="fas fa-save mr-2"></i>
                </a>
            </div>
        </div>

    </div>

    <div class="row mt-3 pl-1">
        <div class="col-11 text-center mt-3">
            <button class="btn-wide mb-4 btn-icon btn btn-zahoriV btn-sm sidebarGreyCollapse" (click)="newTestRepository()">
              {{'main.admin.tms.add'|translate}}
            </button>
        </div>
    </div>

</div>
